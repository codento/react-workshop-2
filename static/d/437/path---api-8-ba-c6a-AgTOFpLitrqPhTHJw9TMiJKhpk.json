{"data":{"markdownRemark":{"html":"<h2>Datan haku</h2>\n<p>Seuraavaksi tarvitsemme dataa, jota näyttää sovelluksessamme. Voimme hakea dataa ns. API:n avulla. API on lyhenne termistä <em>Application Programming Interface</em>, eli ohjelmointirajapinnasta. API:en avulla eri ohjelmat voivat olla keskenään yhteydessä esimerkiksi internetin välityksellä.</p>\n<p>Eräs meidän käyttötarkoitukseemme sopiva API löytyy osoitteesta <a href=\"https://koira-api.herokuapp.com/api/v1/dogs\">https://koira-api.herokuapp.com/api/v1/dogs</a>. Jos avaamme osoitteen selaimella, niin näemme jotain seuraavanlaista:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/react-workshop-2/static/926d30293857a02626282848b8aa62cf/8e724/api_data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8UlEQVQ4y+2P22qEQAyGff+3ExWPRcVxZjx0typ41n9NWhdL79pe9KKBj8yE8CUxbvc3lFWNXBZ4SQRSoZHrGqq8QRavBzVnqlHW1f0T3KMqKCGhVAFDSoksyxDHMZIkYahGKKVQliWqqoLWmnPbtmiahqH3NE3AvgPbeuQNRhAE8DwPpmnCsizYto0oiuD7PkMDaBj1UT1NUwghngOWZQHF/sFT6DgOQ0L6u66LMAxZSBfkec4bd12HYRiwriu2bXuXHRueGLQ2NZ1nEPSnOtH3PUOSk3EcOc/z/FWIHwZJrmFc7d/huiEL8cvxL/yDwgc6vfSC5zSt0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"api_data\"\n        title=\"\"\n        src=\"/react-workshop-2/static/926d30293857a02626282848b8aa62cf/35c67/api_data.png\"\n        srcset=\"/react-workshop-2/static/926d30293857a02626282848b8aa62cf/7b5b4/api_data.png 188w,\n/react-workshop-2/static/926d30293857a02626282848b8aa62cf/d266f/api_data.png 375w,\n/react-workshop-2/static/926d30293857a02626282848b8aa62cf/35c67/api_data.png 750w,\n/react-workshop-2/static/926d30293857a02626282848b8aa62cf/1568d/api_data.png 1125w,\n/react-workshop-2/static/926d30293857a02626282848b8aa62cf/8e846/api_data.png 1500w,\n/react-workshop-2/static/926d30293857a02626282848b8aa62cf/a60d7/api_data.png 2250w,\n/react-workshop-2/static/926d30293857a02626282848b8aa62cf/8e724/api_data.png 2880w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n      />\n  </span>\n  </a></p>\n<blockquote>\n<p>APIssa käytetty data (Eläinten nimet ja kuvat) ovat peräisin <a href=\"https://rekkurescue.com/\">Rekku Rescuesta</a>. Valitsimme kyseisen palvelun datan, koska koemme yhdistyksen tekemän työn tärkeäksi.</p>\n</blockquote>\n<p>Näkyä ei tule säikähtää, sillä mikäli formatoimme datan, niin se alkaa näyttää tutulta:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token number\">8467</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://rekkurescue.com/kissat/otto-2/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Otto\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"imageUrl\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://rekkurescue.com/wp-content/uploads/2019/03/53034501_394709921331043_7096889696600457216_n.jpg\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token number\">8534</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://rekkurescue.com/koirat/martta/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Martta\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"imageUrl\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://rekkurescue.com/wp-content/uploads/2019/03/marttapää-1.jpg\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Data on siis muodoltaan JSON:ia. Tämä tarkoittaa siis sitä, että JavaScript osaa suoraan käsitellä kyseistä dataa. Nyt meidän tarvitsee enää hakea data sovelluksemme käyttöön kyseisestä API:sta.</p>\n<p>JavaScript sisältää funktion <code class=\"language-text\">fetch</code>, jonka avulla voimme tehdä HTTP-pyyntöjä koodistamme käsin, esimerkiksi datan hakua varten. Luodaan funktio, joka hakee API:stamme haluamamme JSON datan:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchPets</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> apiUrl <span class=\"token operator\">=</span> <span class=\"token string\">'https://koira-api.herokuapp.com/api/v1/dogs'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>apiUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Funktio <code class=\"language-text\">fetch</code> on ns. asynkroninen funktio, mikä tarkoittaa sitä, että sovelluksemme ei odota funktion suorituksen lopettamista (eli tässä tapauksessa HTTP-kutsun tekemistä). Tämä johtuu siitä, että joskus <code class=\"language-text\">fetch</code> voi viedä aikaa, emmekä halua blokata käyttöliittymää funktion suorituksen ajaksi. Näin ollen meidän tulee kertoa koodillemme, että odottaa <code class=\"language-text\">fetch</code> funktion palauttamaa arvoa ennen kuin se siirtyy eteenpäin. Tämä on mahdollista komennolla <code class=\"language-text\">await</code>. Komennon <code class=\"language-text\">await</code> käyttäminen vaatii, että funktiomme on asetettu asynkroniseksi. Teimme funktiosta asynkronisen lisäämällä termin <code class=\"language-text\">async</code> funktion määrittelyn alkuun.</p>\n<p> Funktion sisällä muuttuja <code class=\"language-text\">response</code> sisältää HTTP-pyyntömme vastauksen. Käyttämällä sen funktiota <code class=\"language-text\">.json()</code>, joka on myös asynkroninen, saamme haluamamme datan JSON muodossa. Näin ollen lopulta muuttuja <code class=\"language-text\">data</code> sisältää hakemamme JSON datan, joka on lista objekteja (tässä tapauksessa kissoja ja koiria). Koska <code class=\"language-text\">data</code> on lista, simerkiksi <code class=\"language-text\">data[0]</code> palauttaa objektin ja <code class=\"language-text\">data[0].imageUrl</code> palauttaa listan ensimmäisen objektin <code class=\"language-text\">imageUrl</code> arvon.</p>\n<p> Seuraavaksi meidän tulee keksiä paikka, missä kutsua juuri tekemäämme funktiota. Sopiva paikka tälle voisi olla esimerkiksi <code class=\"language-text\">useEffect</code> hookissa, joka suoritetaan vain silloin kuin komponentti renderöidään ensimmäisen kerran. Eli sellaisessa, jonka loimme aiemmin!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchPets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Tehtävä:</strong> Lisää ylläoleva funktio <code class=\"language-text\">fetchPets</code> <code class=\"language-text\">App</code>-komponenttiin ennen aiemmin lisäämääsi <code class=\"language-text\">useEffect</code>-funktiota. Lisäksi muokkaa <code class=\"language-text\">useEffect</code>iä siten, että siellä kutsutaan funktiota <code class=\"language-text\">fetchPets</code> kuten yllä.n funktiota <code class=\"language-text\">setPets</code>. Lisäksi muokkaa edellisessä tehtävässä tekemääsi effektiä siten, että siellä kutsutaan muokkaamaasi funktiota <code class=\"language-text\">fetchPets</code>.</p>\n<p><strong>Tehtävä:</strong> Muokkaa <code class=\"language-text\">fetchPets</code>-funktiota siten, että objektilista <code class=\"language-text\">data</code> asetetaan muuttujan <code class=\"language-text\">pets</code> arvoksi. Muista käyttää tätä varten funktiota <code class=\"language-text\">setPets</code>.</p>\n<p><strong>Tehtävä:</strong> Muokkaa <code class=\"language-text\">Content</code>-komponenttia siten, että se saa propsina muuttujat <code class=\"language-text\">imageUrl</code> ja <code class=\"language-text\">title</code>. Lisäksi muokkaa komponentin sisältöä siten, että se näyttää saamiensa propsien avulla lemmikin kuvan <code class=\"language-text\">img</code>-elementillä, sekä lemmikin otsikon <code class=\"language-text\">h2</code>-elementillä. Anna <code class=\"language-text\">img</code>- ja <code class=\"language-text\">h2</code>-elementeille sopivat CSS-luokat tiedostosta <code class=\"language-text\">index.css</code> (kts. kohdan <code class=\"language-text\">/* STYLES FOR CONTENT: */</code> alapuolelta). Anna <code class=\"language-text\">Content</code>-komponentille <code class=\"language-text\">App</code>-komponentissa <code class=\"language-text\">pets</code>-taulukon ensimmäinen arvo. Huomaa, että <code class=\"language-text\">pets</code> on tyhjä siihen asti, kunnes API:mme palauttaa jotakin dataa. Niinpä tulee varmistaa, että listassa on indeksissä <code class=\"language-text\">0</code> dataa, ennen kuin siihen viitataan. Tämä onnistuu esimerkiksi seuraavasti:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Content imageUrl<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>pets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> pets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">}</span> title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>pets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> pets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>Näiden tehtävien jälkeen sovellus näyttää kutakuinkin tältä:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/react-workshop-2/static/b808d5ce331c68ed4d2ef196f480eec7/dbb61/with_content.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 57.07692307692308%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACI0lEQVQoz3WSX0hTcRTHL1GEQfXQYxEo9BYbYSPqLRMyHdVrQQ+BEREJMURBF5Jp+OfB0Ih6ijCpFlZIQqso91/UtTHd5rSGymYZWJv7p7u7n36baTnn7/Lh3N+553zP+Z37k1QqFfmo1eqc1Wg0aLVaTldUUFlZRYWwR0tLN8TkI7lcLvJxOp1YLBaGPn/CZrXisNtwOGzY7Q7ht2I2mxkbG8Ptdm/Kldhizc/5cVt68Vj7MA320XanDePrXnzjTn79jiDL6YJ5UiaTYQ1ZllGEjcUT+D3DvHt+F5vxIR2tLZwvr+LZ/SaMhk4mvU6i0RiKsprzv8Z6h4qi5MiuRDJFYHyUD/3dPLjXTa2umfITZXw0dOEY7BLF7KJoalNersOCgokkAb+XV097OFd2hpPHTlF94SxmIWYd6OSrb1QIJgsLiu3qs0EwwdTUNKb3AzzqaER//TJXLl2kvq6Gxz1NovuRTYJrSGkxhzVWsnMUQZHYEt9mZgjOzpJajosCUX7OzxOeCwtCfA+FiSwuIoaGspJGSf+j8F9elkkvRmApnnsX1cgIt/z3c1ScKLHF7ZAaQ26y6AUNgubwOLfDHnTTw9RMmLjmNVE7YsR5s4FAtQ7f1VqCNxpY0LezcKudH3UtLNS3riPtcRnIstf1kqIvLzg88RaVd5Ai4dvn7me37w0lQ08Y3n+E4PZiArsOMbntINMlx3P4pAP4d5bg31Gc4w89NctuCISgyAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"with_content\"\n        title=\"\"\n        src=\"/react-workshop-2/static/b808d5ce331c68ed4d2ef196f480eec7/dbb61/with_content.png\"\n        srcset=\"/react-workshop-2/static/b808d5ce331c68ed4d2ef196f480eec7/7b5b4/with_content.png 188w,\n/react-workshop-2/static/b808d5ce331c68ed4d2ef196f480eec7/d266f/with_content.png 375w,\n/react-workshop-2/static/b808d5ce331c68ed4d2ef196f480eec7/dbb61/with_content.png 650w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<h2>Callbackit</h2>\n<p>Komponenteille voidaan välittää myös callback-funktioita, joilla voidaan suorittaa yläkomponentin välittämä funktio alikomponentista. Callbackit ovat hyödyllisiä esimerkiksi tiedon välitykseen alikomponentilta yläkomponentille. Näin voidaan esimerkiksi muuttaa yläkomponentin tilaa alikomponentissa tapahtuvan toiminnan perusteella. Callbackeja välitetään komponentille kuten propsejakin. Callbackit ovat yleisesti käytössä selaimen käyttöliittymätapahtumien yhteydessä.</p>\n<p>Alla on kuvattu komponentti, joka ottaa vastaan count-propsin (joka on automaattisesti alustettu nollaksi) ja joka välittää count-propsin alikomponentille CallbackComponent. CallbackComponentille välitetään myös funktio incrementCount, jota kutsutaan kun p-elementtiä klikataan. Kuten propsejakin, myös callbackeja voidaan välittää useamman komponentin läpi.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ClickComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> count<span class=\"token punctuation\">,</span> setCount <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">incrementCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>CallbackComponent count<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>incrementCount<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> CallbackComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> count<span class=\"token punctuation\">,</span> onClick <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>The component has been clicked <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span> times<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Callback-funktioille voi myös antaa parametreja. Alla ClickComponent-komponentin incrementCount-funktiolle annetaan parametri increment, jonka arvoksi CallbackComponentissa annetaan 3. Nyt count-arvoon lisätään 3 aina kun elementtiä p klikataan.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ClickComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> count<span class=\"token punctuation\">,</span> setCount <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">incrementCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">increment</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> increment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>CallbackComponent count<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>incrementCount<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> CallbackComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> count<span class=\"token punctuation\">,</span> onClick <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>The component has been clicked <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span> times<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Oma callback</h2>\n<p>Luodaan seuraavaksi callback funktio aikaisemmin tekemillemme <code class=\"language-text\">Button</code> komponenteille. Lisätään komponentille uusi prop <code class=\"language-text\">onClick</code>, joka kuvastaa funktiota, ja asetetaan se komponentin juurielementille.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Button</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> icon<span class=\"token punctuation\">,</span> onClick <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>icon<span class=\"token punctuation\">}</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Lisätään seuraavaksi <code class=\"language-text\">App</code> komponenttiin funktio <code class=\"language-text\">handleClick</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'clicked!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Voimme nyt antaa luomamme funktion <code class=\"language-text\">Button</code> komponentille, ja aina kun nappia painetaan, niin selaimen konsoliin tulostuu teksti \"clicked!\". </p>\n<p>Meillä on vielä kuitenkin yksin ongelma: <code class=\"language-text\">Button</code> komponentit sijaitsevat <code class=\"language-text\">Footer</code> komponentissa, emmekä voi suoraan <code class=\"language-text\">App</code> komponentista antaa funktiotamme napeille. Naiivi ratkaisu voisi olla lisätä myös <code class=\"language-text\">Footer</code> komponentille samanlainen prop <code class=\"language-text\">onClick</code> ja laittaa se eteenpäin eli \"passata\" napeille. Tämä koituu kuitenkin kohtaloksi, mikäli haluamme napeille eri <code class=\"language-text\">onClick</code> funktiot. Elegantti ratkaisu olisi se, että muutamme aluksi <code class=\"language-text\">Footer</code> komponentin rakenteen seuraavanlaiseksi:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Footer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>footer<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>footer<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Prop <code class=\"language-text\">children</code> on sellainen prop, joka annetaan jokaiselle komponentille oletuksella. Esimerkissä</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Component1<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Component2 <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Component3 <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Component1<span class=\"token operator\">></span></code></pre></div>\n<p>komponentin <code class=\"language-text\">Component1</code> lapsia ovat <code class=\"language-text\">Component2</code> ja <code class=\"language-text\">Component3</code>. Hyöty tässä on se, että voimme nyt käyttää footeria <code class=\"language-text\">App</code> komponentissa näin:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Footer<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Button icon<span class=\"token operator\">=</span><span class=\"token string\">\"heart\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Button icon<span class=\"token operator\">=</span><span class=\"token string\">\"heart-broken\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Footer<span class=\"token operator\">></span></code></pre></div>\n<p>Nyt pääsemme suoraan <code class=\"language-text\">App</code> komponentista käsiksi nappeihin, ja voimme antaa niille suoraan <code class=\"language-text\">onClick</code> funktiot.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Footer<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span> icon<span class=\"token operator\">=</span><span class=\"token string\">\"heart-broken\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span> icon<span class=\"token operator\">=</span><span class=\"token string\">\"heart\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Footer<span class=\"token operator\">></span></code></pre></div>\n<p><strong>Tehtävä:</strong> Luo <code class=\"language-text\">App</code>-komponenttiin uusi tilamuuttuja nimeltä <code class=\"language-text\">index</code>, jonka alkuarvo on <code class=\"language-text\">0</code>. Lisää myös funktio <code class=\"language-text\">onClick</code>, joka lisää muuttujan <code class=\"language-text\">index</code> arvoa yhdellä. Lisäksi muokkaa <code class=\"language-text\">Footer</code>-komponenttia samankaltaisesti kuin yllä, jotta pääset <code class=\"language-text\">Button</code>-komponentteihin käsiksi suoraan <code class=\"language-text\">App</code>-komponentista, ja anna napeille prop <code class=\"language-text\">onClick</code>, joka on juuri tekemäsi funktio. Muokkaa myös <code class=\"language-text\">Button</code>-komponentteja siten, että ne käyttävät saamaansa <code class=\"language-text\">onClick</code> funktiota, kun niitä klikataan. Viimeiseksi muuta <code class=\"language-text\">App</code>-komponenttia vielä siten, että se antaa <code class=\"language-text\">Content</code>-komponentille <code class=\"language-text\">index</code>-muuttujan määräämän arvon listasta, eikä aina listan ensimmäistä arvoa.</p>\n<p>Tehtävän jälkeen sovelluksen tulisi toimia siten, että aina kun nappia painetaan, niin näytettävän lemmikin kuva muuttuu (ainakin kunnes lemmikkejä riittää).</p>\n<p><a href=\"/react-workshop-2/julkaiseminen/\">Nyt voimme julkaista sovelluksen muiden nähtäväksi!</a></p>","frontmatter":{"title":"API"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/API/"}}